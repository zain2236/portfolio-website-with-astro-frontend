---
import ProjectCard from "../../ui/project-card.astro";
import Button from "../../ui/button.astro";
import { getStrapiImageUrl } from "../../../utils/strapi";

const { data } = Astro.props;

---

<section class="container mx-auto md:py-12 py-8 px-4 md:px-6 lg:px-8">
  {data ? (
    <>
      <div class="text-center max-w-2xl mx-auto">
        <p class="md:text-md text-xs md:mb-1.5 pb-1 tracking-wide font-medium font-ovo">
          {data.subText}
        </p>
        <h2 class="md:text-4xl text-2xl font-semibold font-ovo tracking-wide">
          {data.title}
        </h2>
        <p class="hidden md:block md:text-lg text-sm md:mt-4 mt-2 text-gray-700 font-medium tracking-wide font-ovo">
          {data.description}
        </p>
      </div>

      <div class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4 md:gap-8 sm:gap-6 md:py-12 py-8">
        {data?.projectCard && data.projectCard.map((project: any) => {
          const imageUrl = getStrapiImageUrl(project.projectPic?.url);
          
          // Handle link - could be a string or an object with href property
          const projectLink = typeof project.link === 'string' 
            ? project.link 
            : project.link?.href || project.link?.url || "#";
      
          return (
            <ProjectCard
              title={project.title}
              description={project.description}
              link={projectLink}
              image={imageUrl || ""}
              imageAlt={project.title || "Project image"}
              ctaTtile ={project.link?.title}
              ctaHref={project.link?.href}
            />
          );
        })}
      </div>
    </>
  ) : (
    <p>No content found</p>
  )}
  <div class= "grid place-items-center md:py-8 py-4">

    <Button title={data?.projectCta?.title} bgColor={data?.projectCta?.ctaTheme} textColor={data?.projectCta?.textColor} iconName={data?.projectCta?.iconName} href={data?.projectCta.href} />
    
    </div>
</section>