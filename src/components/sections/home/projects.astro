---
import ProjectCard from "../../ui/project-card.astro";

const { data } = Astro.props;
const STRAPI_URL = "http://localhost:1337";
---

<section class="container mx-auto md:py-12 py-8 px-4 md:px-6 lg:px-8">
  {data ? (
    <>
      <div class="text-center">
        <p class="md:text-md text-xs md:mb-1.5 pb-1 tracking-wide font-medium font-ovo">
          {data.subText}
        </p>
        <h2 class="md:text-4xl text-2xl font-semibold font-ovo tracking-wide">
          {data.title}
        </h2>
        <p class="hidden md:block md:text-sm text-xs md:mt-4 mt-2 text-gray-700 font-medium tracking-wide font-ovo">
          {data.description}
        </p>
      </div>

      <div class="grid md:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-4 md:gap-8 sm:gap-6 md:py-12 py-8">
        {data?.projectCard && data.projectCard.map((project: any) => {
          const imageUrl = project.projectPic?.url 
            ? `${STRAPI_URL}${project.projectPic.url}` 
            : null;
          
          // Handle link - could be a string or an object with href property
          const projectLink = typeof project.link === 'string' 
            ? project.link 
            : project.link?.href || project.link?.url || "#";
      
          return (
            <ProjectCard
              title={project.title}
              description={project.description}
              link={projectLink}
              image={imageUrl || ""}
              imageAlt={project.title || "Project image"}
              ctaTtile ={project.link?.title}
              ctaHref={project.link?.href}
            />
          );
        })}
      </div>
    </>
  ) : (
    <p>No content found</p>
  )}
</section>